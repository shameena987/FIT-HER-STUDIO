!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){function W(e){if(console&&console.warn)console.warn("Scrollax: "+e);else throw"Scrollax: "+e}function ka(e){var t="pageYOffset"in e;return{width:t?window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth:e.offsetWidth,height:t?window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight:e.offsetHeight,left:e[t?"pageXOffset":"scrollLeft"],top:e[t?"pageYOffset":"scrollTop"]}}function X(a){return(a=a.data("scrollax"))&&eval("({"+a+"})")||{}}function Y(e){var t,n;return!!(e&&"object"==typeof e&&"object"==typeof e.window&&e.window==e&&e.setTimeout&&e.alert&&(t=e.document)&&"object"==typeof t&&(n=t.defaultView||t.parentWindow)&&"object"==typeof n&&n==e)}var da,ea,L,M,N,a,g,c,k,l,d,b,e,v=Array.prototype,C=v.push,Z=v.splice,aa=Object.prototype.hasOwnProperty,la=/[-+]?\d+(\.\d+)?/g,ma="translateX translateY rotate rotateX rotateY rotateZ skewX skewY scaleX scaleY".split(" "),ba=e(window),ca=e(document.body),q=function(t,n,r){function o(){return U=ee?ca.find(G):u.find(G),I.length=0,b=!!F.horizontal,U.each(et),l(),F.performanceTrick&&(y=ee?ca:u),c("load"),p}function a(){m&&(m=clearTimeout(m)),m=setTimeout(function(){p.reload()})}function l(){var n=I.length;if(F.performanceTrick&&y&&(clearTimeout($),x||(y.addClass("scrollax-performance"),x=!0),$=setTimeout(function(){y.removeClass("scrollax-performance"),x=!1},100)),n){_=ka(t);for(var r=0;r<n;r++)0>(E=L((S=I[r]).element,t))[b?"right":"bottom"]||E[b?"left":"top"]>_[b?"width":"height"]||(w=(z=S.options).offset||F.offset||0,j=E[b?"right":"bottom"],0>(T=((k=E[b?"width":"height"])-j+w)/k)&&(j=E[b?"left":"top"],T=-1+((k=_[b?"width":"height"])-j+w)/k),1<T||-1>T||i(S,T,b));c("scroll",_)}}function i(t,n){var r=(O=t.parallaxElements).length;if(r)for(var o=0;o<r;o++){var a=H=(B=O[o]).element,l=n;for(V in P=B.properties||(b?{translateX:"100%"}:{translateY:"100%"}),D="",P){if("number"==typeof(A=P[V]))A*=l;else if("string"==typeof A)for(R=A.match(la),v=0,g=R.length;v<g;v++)A=A.replace(R[v],parseFloat(R[v]*l));if(-1!==e.inArray(V,ma))D+=V+"("+A+")";else{var i,f=a.style,c=V;i="opacity"===V?0>(i=0>l?1+A:1-A)?0:1<i?1:i:A,f[c]=i}}D&&(a.style[da]=ea+D)}}function f(t){return void 0!==t?"number"!=typeof t&&"string"!=typeof t||""===t||isNaN(t)?U.index(t):0<=t&&t<I.length?t:-1:-1}function c(t,n){if(K[t]){for(g=K[t].length,v=Q.length=0;v<g;v++)C.call(Q,K[t][v]);for(v=0;v<g;v++)Q[v].call(p,t,n)}}function s(t,n){for(var r=0,o=K[t].length;r<o;r++)if(K[t][r]===n)return r;return -1}var p=this,u=t&&e(t).eq(0)||ba,d=q.instances,h=null;if(t=u[0],e.each(d,function(n,r){n&&n.frame===t&&(h=!0)}),!t||h)h?W("Scrollax: Scrollax has been initialized for this frame!"):W("Scrollax: Frame is not available!");else{var m,v,g,y,$,x,_,b,w,E,S,z,T,j,k,O,B,H,P,V,A,D,R,F=e.extend({},q.defaults,n),I=[],U=null,G=F.parentSelector||"[data-scrollax-parent]",J=F.elementsSelector||"[data-scrollax]",K={},Q=[],ee=Y(t);p.frame=t,p.options=F,p.parents=I,p.initialized=!1,p.reload=o;var et=function(t,n){var r=e(n),o=X(e(n)),a={};a.element=n,a.options=o,a.parallaxElements=[],r.find(J).each(function(t,n){var r=X(e(n));r.element=n,C.call(a.parallaxElements,r)}),C.call(I,a)};p.scroll=l,p.getIndex=f,p.one=function(t,n){function r(){n.apply(p,arguments),p.off(t,r)}return p.on(t,r),p},p.on=function(t,n){if("object"==typeof t)for(var r in t)aa.call(t,r)&&p.on(r,t[r]);else if("function"==typeof n){r=t.split(" ");for(var o=0,a=r.length;o<a;o++)K[r[o]]=K[r[o]]||[],-1===s(r[o],n)&&C.call(K[r[o]],n)}else if("array"==typeof n)for(r=0,o=n.length;r<o;r++)p.on(t,n[r]);return p},p.off=function(t,n){if(n instanceof Array)for(var r=0,o=n.length;r<o;r++)p.off(t,n[r]);else for(var r=t.split(" "),o=0,a=r.length;o<a;o++)if(K[r[o]]=K[r[o]]||[],void 0===n)K[r[o]].length=0;else{var l=s(r[o],n);-1!==l&&Z.call(K[r[o]],l,1)}return p},p.set=function(t,n){return e.isPlainObject(t)?e.extend(F,t):aa.call(F,t)&&(F[t]=n),o(),p},p.destroy=function(){return N(window,"resize",a),N(t,"scroll",l),e.each(d,function(n,r){n&&n.frame===t&&Z.call(q.instances,r,1)}),I.length=0,p.initialized=!1,c("destroy"),p},p.init=function(){if(!p.initialized)return p.on(r),o(),M(window,"resize",a),M(t,"scroll",l),C.call(q.instances,p),p.initialized=!0,c("initialized"),p}}};q.instances=[],L=function(t,n){if(c=(g=t.ownerDocument||t).documentElement,k=Y(n)?n:g.defaultView||window,n=n&&n!==g?n:c,l=(k.pageYOffset||c.scrollTop)-c.clientTop,d=(k.pageXOffset||c.scrollLeft)-c.clientLeft,b={top:0,left:0},!t||!t.getBoundingClientRect)return null;var r={},o=t.getBoundingClientRect();for(a in o)r[a]=o[a];return(b=r).width=b.right-b.left,b.height=b.bottom-b.top,n===k||(b.top+=l,b.left+=d,b.right+=d,b.bottom+=l,n===c||(e=L(n),b.left-=e.left,b.right-=e.left,b.top-=e.top,b.bottom-=e.top)),b},function(){function e(){this.returnValue=!1}function t(){this.cancelBubble=!0}M=window.addEventListener?function(e,t,n,r){return e.addEventListener(t,n,r||!1),n}:function(n,r,o){var a=r+o;return n[a]=n[a]||function(){var r=window.event;r.target=r.srcElement,r.preventDefault=e,r.stopPropagation=t,o.call(n,r)},n.attachEvent("on"+r,n[a]),o},N=window.removeEventListener?function(e,t,n,r){return e.removeEventListener(t,n,r||!1),n}:function(e,t,n){var r=t+n;e.detachEvent("on"+t,e[r]);try{delete e[r]}catch(o){e[r]=void 0}return n}}(),function(){function e(e){for(var r=0,o=t.length;r<o;r++){var a=t[r]?t[r]+e.charAt(0).toUpperCase()+e.slice(1):e;if(null!=n.style[a])return a}}var t=["","webkit","moz","ms","o"],n=document.createElement("div");da=e("transform"),ea=e("perspective")?"translateZ(0) ":""}(),q.defaults={horizontal:!1,offset:0,parentSelector:null,elementsSelector:null,performanceTrick:!1},window.Scrollax=q,e.fn.Scrollax=function(t,n){var r,o;return e.isPlainObject(t)||(("string"==typeof t||!1===t)&&(r=!1===t?"destroy":t,o=slice.call(arguments,1)),t={}),this.each(function(a,l){var i=e.data(l,"scrollax");i||r?i&&r&&i[r]&&i[r].apply(i,o):e.data(l,"scrollax",new q(l,t,n).init())})},e.Scrollax=function(e,t){ba.Scrollax(e,t)};var v=document.head||document.getElementsByTagName("head")[0],w=document.createElement("style");return w.type="text/css",w.styleSheet?w.styleSheet.cssText=".scrollax-performance, .scrollax-performance *, .scrollax-performance *:before, .scrollax-performance *:after { pointer-events: none !important; -webkit-animation-play-state: paused !important; animation-play-state: paused !important; };":w.appendChild(document.createTextNode(".scrollax-performance, .scrollax-performance *, .scrollax-performance *:before, .scrollax-performance *:after { pointer-events: none !important; -webkit-animation-play-state: paused !important; animation-play-state: paused !important; };")),v.appendChild(w),q});
